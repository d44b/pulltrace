---
milestone: v0.2
audited: 2026-02-23
status: gaps_found
scores:
  requirements: 3/8
  phases: 1/2
  integration: 3/8
  flows: 3/8
gaps:
  requirements:
    - id: "VALID-01"
      status: "unsatisfied"
      phase: "Phase 6"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 6 not started — no directory, no plans, no VERIFICATION.md. Integration checker identified pre-execution blocker: agent.runtimeSocket.enabled defaults to false, bare helm install produces no agent DaemonSet."
    - id: "VALID-02"
      status: "unsatisfied"
      phase: "Phase 6"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 6 not started. SSE wiring exists from v0.1 but live cluster validation not performed. Blocked by VALID-01 agent gap."
    - id: "VALID-03"
      status: "unsatisfied"
      phase: "Phase 6"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 6 not started. Metrics endpoint wiring is clean (server.go:218, service.yaml:16-19) — no integration gaps for this requirement. Live cluster curl test not yet run."
    - id: "VALID-04"
      status: "unsatisfied"
      phase: "Phase 6"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 6 not started. Pod correlation wiring exists from v0.1 (podwatcher.go → processReport → SSE). Blocked by VALID-01 agent gap — no agent means no pull reports means no pod correlation data."
    - id: "VALID-05"
      status: "unsatisfied"
      phase: "Phase 6"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 6 not started. Layer drill-down (Layers []LayerStatus added in feature/frontend-redesign) requires deployed image to include that work. Image tag dependency unresolved — values.yaml hardcodes tag: 0.1.0."
  integration:
    - id: "VALID-01/02/04/05"
      finding: "agent.runtimeSocket.enabled defaults to false — bare helm install produces no agent DaemonSet"
      location: "charts/pulltrace/templates/agent-daemonset.yaml line 2 (conditional gate), charts/pulltrace/values.yaml lines 15-17"
      fix: "Phase 6 plan must include --set agent.runtimeSocket.enabled=true --set agent.runtimeSocket.risksAcknowledged=true"
    - id: "VALID-01/05"
      finding: "values.yaml image tags hardcoded to 0.1.0 — Phase 6 must specify which image version to deploy"
      location: "charts/pulltrace/values.yaml lines 6, 49"
      fix: "Phase 6 plan must document required image tag and confirm it includes feature/frontend-redesign layer work for VALID-05"
  flows: []
tech_debt:
  - phase: 05-housekeeping
    items:
      - "COMM-01 (social preview) has no automated enforcement — relies on human operator reading CONTRIBUTING.md before each release"
      - "MEMORY.md notes PullErrors metric 'never incremented' but code at server.go line 479 does increment it — MEMORY.md is stale on this point"
---

# Milestone v0.2 Housekeeping — Audit Report

**Audited:** 2026-02-23
**Status:** ⚠ GAPS FOUND
**Score:** 3/8 requirements satisfied

---

## Summary

| Dimension | Score | Status |
|-----------|-------|--------|
| Requirements | 3/8 | ⚠ gaps_found |
| Phases complete | 1/2 | ⚠ Phase 6 not started |
| Integration (Phase 5) | 3/3 | ✓ passed |
| E2E flows verified | 3/8 | ⚠ Phase 6 flows unverified |

Phase 5 (Housekeeping) is fully complete and verified. Phase 6 (d4b Cluster Validation) has not been started — no plans, no execution, no verification. The 5 unsatisfied VALID-* requirements trigger the FAIL gate.

---

## Requirements Coverage

### 3-Source Cross-Reference

| Requirement | VERIFICATION.md | SUMMARY frontmatter | REQUIREMENTS.md | Final Status |
|-------------|-----------------|--------------------|-----------------:|--------------|
| MAINT-01 | Phase 5: passed | listed (05-01-SUMMARY) | [x] Complete | ✓ satisfied |
| MAINT-02 | Phase 5: passed | listed (05-01-SUMMARY) | [x] Complete | ✓ satisfied |
| COMM-01 | Phase 5: passed | listed (05-01-SUMMARY) | [x] Complete | ✓ satisfied |
| VALID-01 | missing (Phase 6 not started) | missing | [ ] Pending | ✗ unsatisfied |
| VALID-02 | missing (Phase 6 not started) | missing | [ ] Pending | ✗ unsatisfied |
| VALID-03 | missing (Phase 6 not started) | missing | [ ] Pending | ✗ unsatisfied |
| VALID-04 | missing (Phase 6 not started) | missing | [ ] Pending | ✗ unsatisfied |
| VALID-05 | missing (Phase 6 not started) | missing | [ ] Pending | ✗ unsatisfied |

**Orphaned requirements:** None — all 8 requirements are assigned to phases.

---

## Phase Status

| Phase | VERIFICATION.md | Status | Requirements |
|-------|-----------------|--------|--------------|
| Phase 5: Housekeeping | ✓ passed | Complete | MAINT-01, MAINT-02, COMM-01 |
| Phase 6: d4b Cluster Validation | ✗ missing | Not started | VALID-01 – VALID-05 |

---

## Phase 5 Evidence

All three Phase 5 requirements satisfied with direct file evidence:

- **MAINT-01:** `grep "CODE_OF_CONDUCT" CONTRIBUTING.md` → no matches. Removed by Phase 1 commit `ebdaa3d`, confirmed by Phase 5.
- **MAINT-02:** `.github/workflows/ci.yml` lines 186-196 — "Fetch existing Helm repo index" step + `--merge /tmp/helm-pages/index.yaml`. Wiring verified: fetch path and merge path are identical.
- **COMM-01:** `CONTRIBUTING.md` lines 145-159 — "Release Checklist" section with social preview upload procedure (URL, 1280x640px recommendation, rationale).

---

## Integration Findings

### Phase 5 → Phase 6 Blockers

**Blocker 1 — Agent DaemonSet gate (affects VALID-01, VALID-02, VALID-04, VALID-05)**

`charts/pulltrace/templates/agent-daemonset.yaml` line 2 wraps the entire DaemonSet in `{{- if .Values.agent.runtimeSocket.enabled }}`. The default value is `false` (values.yaml lines 15-17). A bare `helm install pulltrace pulltrace/pulltrace` produces **no agent DaemonSet** — server pod only. No image pulls will be reported. VALID-02, VALID-04, VALID-05 will all silently fail.

**Fix for Phase 6 plan:** Install with `--set agent.runtimeSocket.enabled=true --set agent.runtimeSocket.risksAcknowledged=true`.

**Blocker 2 — Image tag unresolved (affects VALID-01, VALID-05)**

`charts/pulltrace/values.yaml` lines 6 and 49 hardcode `tag: "0.1.0"`. VALID-05 (layer drill-down) requires the `feature/frontend-redesign` code (adds `Layers []LayerStatus`). If the deployed image is the v0.1.0 tag which predates this work, VALID-05 will fail.

**Fix for Phase 6 plan:** Document which image tag to deploy and confirm it includes the layer drill-down feature.

### Clean Integration Paths

- **VALID-03 (Prometheus metrics):** End-to-end wiring complete — `server.go:218` registers `promhttp.Handler()`, `server-deployment.yaml:48` exposes port 9090, `service.yaml:16-19` routes `metricsPort`. No gaps. Phase 6 is a live verification curl only.
- **VALID-04 (pod correlation):** `podwatcher.go` → `processReport` → SSE wiring intact from v0.1. No integration work needed in Phase 6, only live cluster verification.
- **VALID-02/VALID-05 wiring:** SSE chain (`/api/v1/events` → `usePulls()` → UI) and layer data path (`pull.layers` → `LayerDetail`) both exist from v0.1 / feature branch. Conditional on Blocker 1 and Blocker 2 being resolved.

---

## Tech Debt

| Phase | Item | Severity |
|-------|------|----------|
| Phase 5 | COMM-01 social preview has no automated enforcement — relies on human reading CONTRIBUTING.md | Low |
| (inherited) | MEMORY.md states "PullErrors metric never incremented" but `server.go:479` does increment it — stale memory note | Trivial |

No critical tech debt. Both items are non-blocking.

---

## Milestone Definition of Done

**Milestone Goal:** "Clean up post-launch debt, fix CI for future releases, and fully validate pulltrace on a live cluster."

| Objective | Status |
|-----------|--------|
| Clean up post-launch debt | ✓ Done (Phase 5) |
| Fix CI for future releases | ✓ Done (MAINT-02, --merge flag) |
| Fully validate on live cluster | ✗ Not started (Phase 6 pending) |

The milestone goal is **not yet achieved** — the live cluster validation half is incomplete.
